import React, { useState } from "react";
import { useHistory } from "react-router-dom";
import {
  GridContainer,
  Login,
  P,
  Form,
  Input,
  Button,
  Display,
} from "./HandleElements";

import { IconContext } from "react-icons/lib";
import "./animate.css";
import Loading from "../../components/LoadingScreen";
import TwitterHandleError from "../../components/TwitterErrorScreen";


const TwitterHandle = () => {
  const [handle, setHandle] = useState("");
  const [isLoading, setLoading] = useState(false);
  const [error, setError] = useState(false);

  document.title = "Twitter User"

  const history = useHistory();

  const handleSubmit = (event) => {
    var data = new FormData();
    data.append("username", handle);
    fetch("https://depression-recognizer.herokuapp.com/api/username/", {
      method: "POST",
      body: data,
    })
      .then((response) => response.json())
      .then((response) => {
        history.push("/userDash", { analysis: response });
        setLoading(false);
      })
      .catch((err) => {
        setError(true)
        setLoading(false)
      });
    event.preventDefault();
  };

  return (
    <>
      <IconContext.Provider value={{ color: "#fff" }}>
        {isLoading && <Loading />}
        {error && <TwitterHandleError />}
        <GridContainer style={{ display: isLoading || error ? "none" : "grid" }}>
          <Login>
            <Form onSubmit={handleSubmit}>
              <P>Enter your Twitter Handle</P>
              <Input onChange={(e) => setHandle(e.target.value)} />
              <Button onClick={() => setLoading(true)}>Submit</Button>
            </Form>
          </Login>
          <Display>
            <svg
              width="400"
              height="400"
              viewBox="0 0 535 458"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="mention 1" clipPath="url(#clip0)">
                <path
                  id="Vector"
                  d="M223.146 445.593H235.406L241.238 398.305L223.144 398.306L223.146 445.593Z"
                  fill="#FFB8B8"
                />
                <path
                  id="Vector_2"
                  d="M259.05 456.976L220.519 456.978L220.519 442.091L244.163 442.09C246.118 442.09 248.053 442.475 249.86 443.223C251.666 443.971 253.307 445.067 254.689 446.449C256.072 447.832 257.169 449.473 257.917 451.279C258.665 453.085 259.05 455.021 259.05 456.976V456.976Z"
                  fill="#2F2E41"
                />
                <path
                  id="Vector_3"
                  d="M110.003 438.56L122.009 441.042L137.297 395.915L119.578 392.251L110.003 438.56Z"
                  fill="#FFB8B8"
                />
                <path
                  id="Vector_4"
                  d="M142.858 456.978L105.125 449.176L108.14 434.597L131.294 439.385C135.16 440.184 138.551 442.487 140.719 445.786C142.888 449.085 143.657 453.111 142.858 456.977V456.977L142.858 456.978Z"
                  fill="#2F2E41"
                />
                <path
                  id="Vector_5"
                  d="M143.258 286.411C142.224 285.366 141.432 284.107 140.937 282.723C140.442 281.338 140.257 279.863 140.395 278.399C140.532 276.935 140.989 275.52 141.733 274.251C142.476 272.983 143.489 271.894 144.7 271.06L135.186 236.614L152.851 242.342L159.177 274.173C160.443 276.3 160.886 278.817 160.421 281.248C159.956 283.679 158.615 285.855 156.653 287.363C154.691 288.872 152.243 289.608 149.774 289.433C147.306 289.257 144.987 288.182 143.258 286.411V286.411Z"
                  fill="#FFB8B8"
                />
                <path
                  id="Vector_6"
                  d="M219.564 428.255C218.494 428.256 217.459 427.876 216.644 427.183C215.83 426.489 215.289 425.528 215.12 424.472L192.272 298.573C192.222 298.252 192.069 297.955 191.836 297.728C191.603 297.5 191.303 297.355 190.98 297.314C190.657 297.272 190.33 297.337 190.047 297.498C189.764 297.659 189.541 297.907 189.412 298.206L138.511 415.974C138.058 417.006 137.237 417.831 136.208 418.29C135.18 418.749 134.017 418.808 132.947 418.455L115.067 412.447C114.484 412.251 113.947 411.938 113.49 411.527C113.033 411.115 112.665 410.615 112.409 410.055C112.153 409.496 112.014 408.891 112.001 408.276C111.988 407.661 112.101 407.05 112.334 406.481L136.943 346.198L157.487 255.244L157.632 255.134C158.028 254.833 197.551 225.333 224.559 248.93C249.274 270.523 244.674 393.915 243.501 418.431C243.459 419.4 243.103 420.329 242.486 421.077C241.869 421.825 241.025 422.352 240.082 422.579L220.656 428.122C220.299 428.21 219.932 428.255 219.564 428.255Z"
                  fill="#2F2E41"
                />
                <path
                  id="Vector_7"
                  d="M180.834 148.559C194.399 148.559 205.395 137.563 205.395 123.998C205.395 110.433 194.399 99.4369 180.834 99.4369C167.27 99.4369 156.273 110.433 156.273 123.998C156.273 137.563 167.27 148.559 180.834 148.559Z"
                  fill="#FFB8B8"
                />
                <path
                  id="Vector_8"
                  d="M228.59 275.411C227.556 274.366 226.764 273.107 226.269 271.723C225.775 270.339 225.59 268.863 225.727 267.399C225.865 265.935 226.321 264.52 227.065 263.252C227.809 261.984 228.822 260.894 230.032 260.06L220.519 225.614L238.183 231.342L244.509 263.173C245.776 265.3 246.219 267.817 245.753 270.248C245.288 272.679 243.948 274.855 241.985 276.363C240.023 277.872 237.576 278.608 235.107 278.433C232.638 278.257 230.319 277.182 228.59 275.411V275.411Z"
                  fill="#FFB8B8"
                />
                <path
                  id="Vector_9"
                  d="M153.612 265.593C153.271 265.593 152.934 265.526 152.618 265.396C142.246 261.18 150.516 178.882 150.874 175.38L150.913 175.23C151.17 174.645 151.429 174.071 151.691 173.51C154.246 167.828 158.527 163.095 163.925 159.984C169.323 156.873 175.564 155.541 181.762 156.178C188.06 156.662 194.053 159.089 198.912 163.125C203.772 167.16 207.26 172.604 208.893 178.706L228.112 249.123C228.317 249.871 228.325 250.659 228.135 251.411C227.946 252.163 227.564 252.853 227.029 253.415C226.494 253.976 225.822 254.389 225.08 254.614C224.338 254.839 223.55 254.869 222.793 254.699C207.84 251.359 171.601 245.43 158.091 262.467C156.432 264.561 154.956 265.593 153.612 265.593Z"
                  fill="#00B0FF"
                />
                <path
                  id="Vector_10"
                  d="M228.086 258.833C227.593 258.832 227.103 258.751 226.637 258.592C226.061 258.4 225.531 258.092 225.079 257.688C224.626 257.283 224.261 256.791 224.005 256.241L207.279 220.582L191.004 173.733C190.307 171.719 190.205 169.546 190.709 167.476C191.213 165.405 192.303 163.523 193.848 162.055V162.055C195.125 160.844 196.671 159.955 198.36 159.461C200.048 158.967 201.83 158.882 203.558 159.213C205.286 159.544 206.91 160.282 208.296 161.365C209.682 162.448 210.79 163.846 211.529 165.442L233.186 212.232L250.084 242.755C250.375 243.281 250.557 243.859 250.621 244.457C250.685 245.054 250.628 245.658 250.455 246.233C250.281 246.809 249.995 247.343 249.611 247.806C249.228 248.268 248.756 248.65 248.223 248.927L230.156 258.322C229.517 258.656 228.807 258.832 228.086 258.833V258.833Z"
                  fill="#00B0FF"
                />
                <path
                  id="Vector_11"
                  d="M155 267.599C154.839 267.599 154.677 267.59 154.516 267.573L134.266 265.425C133.662 265.361 133.078 265.176 132.549 264.88C132.019 264.585 131.554 264.186 131.183 263.706C130.811 263.227 130.541 262.677 130.387 262.091C130.233 261.504 130.2 260.892 130.288 260.292L136.041 221.328L148.352 173.285C148.883 171.221 149.998 169.354 151.562 167.906C153.126 166.458 155.074 165.492 157.173 165.121V165.121C158.906 164.817 160.686 164.93 162.367 165.451C164.047 165.972 165.579 166.885 166.837 168.115C168.094 169.346 169.041 170.858 169.598 172.526C170.155 174.195 170.307 175.972 170.041 177.711L162.249 228.678L159.476 263.456C159.386 264.582 158.876 265.633 158.047 266.4C157.218 267.168 156.13 267.596 155 267.599V267.599Z"
                  fill="#00B0FF"
                />
                <path
                  id="Vector_12"
                  d="M184.715 110.791L205.126 109.304C205.815 104.686 204.935 99.9713 202.627 95.913C200.319 91.8546 196.717 88.6874 192.397 86.9182C183.696 83.6133 172.898 87.2843 169.556 92.5493C165.155 92.1673 160.724 92.7941 156.602 94.382C152.48 95.97 148.774 98.4772 145.766 101.713C142.759 104.949 140.529 108.828 139.246 113.055C137.964 117.283 137.662 121.747 138.365 126.108C139.067 130.47 140.755 134.613 143.3 138.224C145.845 141.835 149.18 144.818 153.051 146.946C156.923 149.074 161.228 150.291 165.641 150.504C170.053 150.718 174.456 149.922 178.515 148.178C170.091 136.354 174.416 117.563 184.715 110.791Z"
                  fill="#2F2E41"
                />
                <path
                  id="Vector_13"
                  d="M147.594 99.5162C141.261 93.7294 133.519 89.1037 125.001 88.0817C116.483 87.0597 107.176 90.1808 102.272 97.2202C97.3678 104.26 98.2223 115.202 105.12 120.302C107.953 122.397 110.101 125.283 111.295 128.597C112.488 131.912 112.673 135.505 111.827 138.925C110.98 142.344 109.139 145.436 106.537 147.81C103.934 150.184 100.687 151.734 97.2043 152.265C84.5391 154.194 75.0027 167.244 75.9509 180.02C76.8991 192.796 87.3679 203.934 99.8544 206.801C112.341 209.668 126.003 204.738 134.718 195.347C143.432 185.957 147.335 172.625 146.342 159.852C145.349 147.08 139.742 134.911 131.68 124.954C129.491 122.251 131.136 117.963 133.948 115.916C136.761 113.868 140.343 113.296 143.635 112.172C146.927 111.048 150.325 108.931 151.084 105.536C151.843 102.141 147.994 98.1765 147.594 99.5162Z"
                  fill="#2F2E41"
                />
                <g id="at">
                  <path
                    id="Vector_14"
                    d="M517.205 175H376.205C371.698 174.995 367.377 173.202 364.19 170.015C361.003 166.828 359.21 162.507 359.205 158V17C359.21 12.4929 361.003 8.17181 364.19 4.98479C367.377 1.79777 371.698 0.00507387 376.205 0H517.205C521.712 0.00507387 526.033 1.79777 529.22 4.98479C532.407 8.17181 534.2 12.4929 534.205 17V158C534.2 162.507 532.407 166.828 529.22 170.015C526.033 173.202 521.712 174.995 517.205 175ZM376.205 2C372.228 2.0045 368.415 3.58629 365.603 6.39836C362.791 9.21043 361.209 13.0231 361.205 17V158C361.209 161.977 362.791 165.79 365.603 168.602C368.415 171.414 372.228 172.996 376.205 173H517.205C521.182 172.996 524.994 171.414 527.806 168.602C530.619 165.79 532.2 161.977 532.205 158V17C532.2 13.0231 530.619 9.21043 527.806 6.39836C524.994 3.58629 521.182 2.0045 517.205 2H376.205Z"
                    fill="#3F3D56"
                  />
                  <path
                    id="Vector_15"
                    d="M442.181 114.148C439.284 114.174 436.414 113.59 433.758 112.434C431.101 111.278 428.718 109.576 426.763 107.438C422.196 102.452 419.962 95.2193 420.633 87.5959C421.191 80.8008 424.037 74.3959 428.707 69.4283C430.936 67.0175 433.633 65.0872 436.634 63.756C439.634 62.4249 442.876 61.7208 446.158 61.687C449.199 61.6736 452.209 62.3006 454.992 63.5272C457.775 64.7538 460.268 66.5525 462.31 68.8064C464.637 71.4383 466.393 74.524 467.468 77.8688C468.542 81.2136 468.912 84.7448 468.553 88.2396V88.2397C467.869 95.9871 464.86 102.567 459.85 107.268C455.054 111.731 448.733 114.192 442.181 114.148V114.148ZM446.158 69.0202C436.89 69.0202 428.887 77.4621 427.938 88.239C427.447 93.819 428.989 99.0116 432.171 102.486C433.435 103.878 434.982 104.984 436.709 105.731C438.435 106.477 440.301 106.847 442.181 106.815C450.828 106.815 460.076 100.872 461.248 87.5952V87.5954C461.518 85.1139 461.271 82.6035 460.523 80.2221C459.775 77.8408 458.542 75.6401 456.902 73.7587C455.544 72.2591 453.886 71.0622 452.035 70.2458C450.183 69.4294 448.181 69.0118 446.158 69.0202V69.0202Z"
                    fill="#00B0FF"
                  />
                  <path
                    id="Vector_16"
                    d="M477.033 114.244C476.216 114.246 475.4 114.176 474.595 114.035C472.478 113.67 470.457 112.878 468.656 111.707C466.855 110.536 465.311 109.011 464.118 107.224C461.513 103.345 460.413 98.1478 460.938 92.1932L463.329 65.0458C463.416 64.0785 463.884 63.1853 464.629 62.5622C465.374 61.9391 466.336 61.6371 467.303 61.7223C468.27 61.8076 469.165 62.2732 469.789 63.0169C470.414 63.7607 470.718 64.7219 470.634 65.6895L468.243 92.8367C467.557 100.62 470.411 105.846 475.875 106.815C477.75 107.147 481.12 106.631 484.445 104.084C487.84 101.482 492.089 96.1048 493.043 85.2634C494.139 72.8254 490.961 62.1478 483.851 54.3844C476.398 46.2455 465.116 41.9436 451.224 41.9436C425.689 41.9436 403.096 62.7109 400.861 88.2373C400.424 93.0398 400.77 97.8814 401.885 102.573C402.112 103.519 401.955 104.516 401.448 105.345C400.94 106.175 400.124 106.769 399.178 106.996C398.233 107.224 397.236 107.067 396.406 106.559C395.577 106.052 394.983 105.235 394.755 104.29C393.454 98.8275 393.049 93.19 393.556 87.5977C395.016 73.2379 401.693 59.9126 412.322 50.1467C422.95 40.3809 436.792 34.8529 451.224 34.6104C467.228 34.6104 480.38 39.7355 489.26 49.4319C497.673 58.6196 501.611 71.5733 500.348 85.9068C499.16 99.4051 493.469 106.407 488.905 109.905C485.52 112.595 481.355 114.118 477.033 114.244Z"
                    fill="#00B0FF"
                  />
                  <path
                    id="Vector_17"
                    d="M442.475 141.225C430.44 141.321 418.782 137.029 409.682 129.153C409.32 128.835 409.023 128.449 408.811 128.017C408.598 127.584 408.472 127.114 408.441 126.634C408.41 126.153 408.474 125.67 408.629 125.214C408.785 124.758 409.028 124.337 409.347 123.975C409.665 123.613 410.051 123.318 410.484 123.105C410.916 122.893 411.386 122.768 411.867 122.737C412.348 122.707 412.83 122.771 413.286 122.927C413.742 123.083 414.163 123.327 414.524 123.646C422.286 130.345 432.222 133.987 442.475 133.891C450.695 133.891 455.67 133.342 463.415 130.088C463.859 129.901 464.335 129.804 464.817 129.801C465.299 129.799 465.776 129.891 466.222 130.073C466.668 130.255 467.074 130.523 467.416 130.862C467.758 131.201 468.031 131.603 468.217 132.047C468.404 132.491 468.501 132.968 468.503 133.45C468.506 133.931 468.413 134.408 468.231 134.854C468.049 135.3 467.781 135.706 467.442 136.048C467.103 136.39 466.7 136.662 466.256 136.849C457.399 140.57 451.531 141.225 442.475 141.225Z"
                    fill="#00B0FF"
                  />
                </g>
                <path
                  id="Vector_18"
                  d="M382 457.917H0.999992C0.734776 457.917 0.480436 457.812 0.2929 457.625C0.105364 457.437 -7.62939e-06 457.183 -7.62939e-06 456.917C-7.62939e-06 456.652 0.105364 456.398 0.2929 456.21C0.480436 456.023 0.734776 455.917 0.999992 455.917H382C382.265 455.917 382.52 456.023 382.707 456.21C382.895 456.398 383 456.652 383 456.917C383 457.183 382.895 457.437 382.707 457.625C382.52 457.812 382.265 457.917 382 457.917Z"
                  fill="#CCCCCC"
                />
              </g>
              <defs>
                <clipPath id="clip0">
                  <rect width="534.205" height="457.917" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </Display>
        </GridContainer>
      </IconContext.Provider>
    </>
  );
};

export default TwitterHandle;
